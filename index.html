<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рооро╛рооройрпНро▒ роЙро▒рпБрокрпНрокро┐ройро░рпН - роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХро│рпН</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #4F46E5;
            --primary-dark: #4338CA;
            --secondary: #D97706;
            --secondary-dark: #B45309;
            --success: #059669;
            --danger: #DC2626;
            --light: #F3F4F6;
            --dark: #1F2937;
            --gray: #6B7280;
            --export: #2563EB;
            --import: #16A34A;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--dark);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 25px 30px;
            text-align: center;
            position: relative;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .logo {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            font-weight: bold;
            color: var(--primary);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .header-text h1 {
            font-size: 26px;
            margin-bottom: 8px;
        }

        .header-text p {
            font-size: 16px;
            opacity: 0.9;
        }

        .contact-info {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255,255,255,0.1);
            padding: 8px 15px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            font-size: 14px;
        }

        /* Main Content */
        .main-content {
            padding: 30px;
        }

        /* Announcements Section */
        .announcements-section {
            margin-bottom: 30px;
        }

        .section-title {
            color: var(--primary);
            font-size: 24px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .section-title i {
            font-size: 20px;
        }

        .title-actions {
            display: flex;
            gap: 8px;
        }

        .title-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .title-btn:hover {
            background: var(--primary-dark);
        }

        .announcements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .announcement-card {
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 10px;
            box-shadow: 0 5px 10px rgba(0,0,0,0.05);
        }

        .announcement-card:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .announcement-category {
            display: inline-block;
            background: #E0E7FF;
            color: var(--primary);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            align-self: flex-start;
        }

        .announcement-title {
            font-size: 18px;
            font-weight: bold;
            color: var(--dark);
        }

        .announcement-description {
            color: var(--gray);
            line-height: 1.5;
            font-size: 14px;
            white-space: pre-wrap;
        }

        .announcement-date {
            font-size: 12px;
            color: var(--gray);
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 5px;
        }

        .card-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            justify-content: flex-end;
            border-top: 1px solid #E5E7EB;
            padding-top: 10px;
        }

        .card-btn {
            background: transparent;
            border: none;
            color: var(--primary);
            cursor: pointer;
            padding: 5px 8px;
            border-radius: 4px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 13px;
        }

        .card-btn:hover {
            background: var(--primary);
            color: white;
        }

        .card-btn.delete:hover {
            background: var(--danger);
        }

        .card-btn.whatsapp:hover {
            background: #25D366;
            color: white;
        }

        .quick-search {
            margin-top: 20px;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-box {
            position: relative;
            flex: 1;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: 2px solid #E5E7EB;
            border-radius: 50px;
            font-size: 15px;
            background: white;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            font-size: 16px;
        }

        .category-filter {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 15px;
            background: #F3F4F6;
            border: 2px solid #E5E7EB;
            border-radius: 20px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .filter-btn:hover {
            border-color: var(--primary);
            background: #E0E7FF;
        }

        .filter-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* WhatsApp Section */
        .whatsapp-section {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            border-radius: 12px;
            padding: 25px;
            color: white;
            margin-top: 30px;
        }

        .whatsapp-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }

        .whatsapp-header i {
            font-size: 32px;
        }

        .whatsapp-header h3 {
            font-size: 22px;
            font-weight: bold;
        }

        .whatsapp-message-box {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 18px;
            margin: 18px 0;
            backdrop-filter: blur(10px);
        }

        .message-preview {
            font-family: 'Arial', sans-serif;
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            white-space: pre-wrap;
            line-height: 1.6;
            max-height: 250px;
            overflow-y: auto;
            font-size: 14px;
        }

        .customer-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-label {
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 13px;
        }

        .input-field {
            padding: 10px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 15px;
        }

        .input-field::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .input-field:focus {
            outline: none;
            border-color: white;
        }

        .whatsapp-btn {
            background: white;
            color: #25D366;
            border: none;
            padding: 14px 28px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 18px auto 0;
            transition: all 0.3s;
            width: 100%;
            justify-content: center;
        }

        .whatsapp-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .whatsapp-test-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid white;
            padding: 8px 15px;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .whatsapp-test-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 25px;
            padding: 20px;
            border-top: 1px solid #E5E7EB;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 22px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .btn-print {
            background: var(--primary);
            color: white;
        }

        .btn-print:hover {
            background: var(--primary-dark);
        }

        .btn-save {
            background: var(--success);
            color: white;
        }

        .btn-save:hover {
            background: #047857;
        }

        .btn-clear {
            background: var(--danger);
            color: white;
        }

        .btn-clear:hover {
            background: #B91C1C;
        }

        .btn-reset {
            background: var(--secondary);
            color: white;
        }

        .btn-reset:hover {
            background: var(--secondary-dark);
        }

        .btn-export {
            background: var(--export);
            color: white;
        }

        .btn-export:hover {
            background: #1E40AF;
        }

        .btn-import {
            background: var(--import);
            color: white;
        }

        .btn-import:hover {
            background: #15803D;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            background: var(--dark);
            color: white;
            margin-top: 30px;
        }

        .footer p {
            margin: 5px 0;
            font-size: 14px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 25px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            font-size: 20px;
            font-weight: bold;
            color: var(--dark);
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--primary);
        }

        .modal-input, .modal-select, .modal-textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #E5E7EB;
            border-radius: 8px;
            font-size: 15px;
            margin-bottom: 12px;
        }

        .modal-textarea {
            min-height: 80px;
            resize: vertical;
            font-family: 'Arial', sans-serif;
        }

        .modal-input:focus, .modal-select:focus, .modal-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn-add {
            flex: 1;
            padding: 10px;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-add:hover {
            background: #047857;
        }

        .btn-cancel {
            flex: 1;
            padding: 10px;
            background: var(--gray);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-cancel:hover {
            background: #4B5563;
        }

        /* Announcement Counter */
        .announcement-counter {
            text-align: center;
            margin: 15px 0;
            color: var(--gray);
            font-size: 13px;
        }

        .announcement-counter span {
            font-weight: bold;
            color: var(--primary);
        }

        /* New Announcement Button */
        .new-announcement-btn {
            background: linear-gradient(135deg, var(--success) 0%, #047857 100%);
            color: white;
            border: 2px dashed white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 200px;
        }

        .new-announcement-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .new-announcement-icon {
            font-size: 40px;
            margin-bottom: 8px;
        }

        .new-announcement-text {
            font-size: 16px;
            font-weight: 600;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                padding: 20px;
            }
            
            .logo-container {
                flex-direction: column;
                text-align: center;
            }
            
            .customer-inputs {
                grid-template-columns: 1fr;
            }
            
            .contact-info {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .section-title {
                font-size: 20px;
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .quick-search {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                max-width: 100%;
            }
            
            .whatsapp-btn {
                padding: 12px 20px;
                font-size: 15px;
            }
        }

        @media (max-width: 480px) {
            .header-text h1 {
                font-size: 22px;
            }
            
            .header-text p {
                font-size: 14px;
            }
            
            .action-btn {
                padding: 10px 18px;
                font-size: 14px;
            }
            
            .announcements-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 20px;
            }
        }

        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .announcement-card {
            animation: fadeIn 0.5s ease-out;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo-container">
                <div class="logo">A</div>
                <div class="header-text">
                    <h1>роЪ.роЖро░рпНродро░рпН роороЪрпНроЪро╛родрпБ / роЬрпЖ.ро░ро┐роХрпНроЯро╛ роЖро░рпНродро░рпН роороЪрпНроЪро╛родрпБ M.C</h1>
                    <p>40 ро╡ро╛ро░рпНроЯрпБ рооро╛рооройрпНро▒ роЙро▒рпБрокрпНрокро┐ройро░рпН, родрпВродрпНродрпБроХрпНроХрпБроЯро┐-628001</p>
                </div>
            </div>
            
            <div class="contact-info">
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <span>9659286662</span>
                </div>
                <div class="contact-item">
                    <i class="fab fa-whatsapp"></i>
                    <span>WhatsApp: 9659286662</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Announcements Section -->
            <div class="announcements-section">
                <h2 class="section-title">
                    <div>
                        <i class="fas fa-bullhorn"></i>
                        роороХрпНроХро│рпБроХрпНроХро╛рой роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХро│рпН
                    </div>
                    <div class="title-actions">
                        <button class="title-btn" onclick="openAddAnnouncementModal()">
                            <i class="fas fa-plus"></i> рокрпБродро┐роп роЕро▒ро┐ро╡ро┐рокрпНрокрпБ
                        </button>
                    </div>
                </h2>
                
                <div class="announcement-counter">
                    роорпКродрпНрод роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХро│рпН: <span id="totalAnnouncementsCount">0</span>
                </div>
                
                <div class="quick-search">
                    <div class="search-box">
                        <input type="text" class="search-input" id="announcementSearch" 
                               placeholder="ЁЯФН роЕро▒ро┐ро╡ро┐рокрпНрокрпИ родрпЗроЯро╡рпБроорпН...">
                        <div class="search-icon">
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                    
                    <div class="category-filter">
                        <button class="filter-btn active" onclick="filterAnnouncements('all')">роЕройрпИродрпНродрпБроорпН</button>
                        <button class="filter-btn" onclick="filterAnnouncements('родрогрпНрогрпАро░рпН')">родрогрпНрогрпАро░рпН</button>
                        <button class="filter-btn" onclick="filterAnnouncements('рооро┐ройрпНродроЯрпИ')">рооро┐ройрпНродроЯрпИ</button>
                        <button class="filter-btn" onclick="filterAnnouncements('рокрпКродрпБ')">рокрпКродрпБ</button>
                        <button class="filter-btn" onclick="filterAnnouncements('роиро┐роХро┤рпНро╡рпБ')">роиро┐роХро┤рпНро╡рпБ</button>
                    </div>
                </div>
                
                <div class="announcements-grid" id="announcementsGrid">
                    <!-- Announcements will be loaded here -->
                </div>
                
                <!-- Add New Announcement Button -->
                <div class="announcements-grid">
                    <div class="new-announcement-btn" onclick="openAddAnnouncementModal()">
                        <div class="new-announcement-icon">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <div class="new-announcement-text">
                            + рокрпБродро┐роп роЕро▒ро┐ро╡ро┐рокрпНрокрпБ роЪрпЗро░рпНроХрпНроХ
                        </div>
                        <div style="font-size: 13px; opacity: 0.8;">
                            роХро┐ро│ро┐роХрпН роЪрпЖропрпНропро╡рпБроорпН
                        </div>
                    </div>
                </div>
            </div>

            <!-- WhatsApp Message Section -->
            <div class="whatsapp-section">
                <div class="whatsapp-header">
                    <i class="fab fa-whatsapp"></i>
                    <h3>роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХро│рпИ ро╡ро╛роЯрпНроЪрокрпНрокро┐ро▓рпН роЕройрпБрокрпНрокрпБроХ</h3>
                </div>
                
                <div class="whatsapp-message-box">
                    <div class="customer-inputs">
                        <div class="input-group">
                            <label class="input-label">рокрпЖро▒рпБроиро░рпН рокрпЖропро░рпН *</label>
                            <input type="text" id="recipientName" class="input-field" placeholder="рокрпЖро▒рпБроиро░рпН рокрпЖропро░рпН">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">родрпКро▓рпИрокрпЗроЪро┐ роОрогрпН *</label>
                            <input type="tel" id="recipientPhone" class="input-field" placeholder="9659286662">
                        </div>
                    </div>
                    
                    <button class="whatsapp-test-btn" onclick="testWhatsAppMessage()">
                        <i class="fas fa-vial"></i> WhatsApp роЪрпЖропрпНродро┐ роЪрпЛродройрпИ
                    </button>
                    
                    <div style="margin-top: 15px;">
                        <label class="input-label">роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯроорпН:</label>
                        <div class="message-preview" id="messagePreview">
                            ро╡рогроХрпНроХроорпН! 
роЗройрпНро▒рпИроп роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХро│рпН:
...
                        </div>
                    </div>
                    
                    <button type="button" class="whatsapp-btn" onclick="sendWhatsAppMessage()">
                        <i class="fab fa-whatsapp"></i>
                        ро╡ро╛роЯрпНроЪрокрпНрокро┐ро▓рпН роЕройрпБрокрпНрокрпБ
                    </button>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button type="button" class="action-btn btn-print" onclick="printPage()">
                    <i class="fas fa-print"></i> роЕроЪрпНроЪро┐роЯрпБ
                </button>
                <button type="button" class="action-btn btn-save" onclick="saveAnnouncements()">
                    <i class="fas fa-save"></i> роЪрпЗрооро┐
                </button>
                <button type="button" class="action-btn btn-export" onclick="exportData()">
                    <i class="fas fa-download"></i> роПро▒рпНро▒рпБроородро┐
                </button>
                <button type="button" class="action-btn btn-import" onclick="document.getElementById('importFile').click()">
                    <i class="fas fa-upload"></i> роЗро▒роХрпНроХрпБроородро┐
                </button>
                <button type="button" class="action-btn btn-clear" onclick="clearAll()">
                    <i class="fas fa-trash"></i> роЕро┤ро┐
                </button>
            </div>
            <!-- Hidden file input for import -->
            <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(event)">
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>роиройрпНро▒ро┐! роорпАрогрпНроЯрпБроорпН ро╡ро░рпБроХ!</p>
            <p>40 ро╡ро╛ро░рпНроЯрпБ рооро╛рооройрпНро▒ роЙро▒рпБрокрпНрокро┐ройро░рпН, родрпВродрпНродрпБроХрпНроХрпБроЯро┐-628001</p>
            <p style="font-size: 13px; margin-top: 8px; opacity: 0.8;">
                ┬й 2024 роЕройрпИродрпНродрпБ роЙро░ро┐роорпИроХро│рпБроорпН рокро╛родрпБроХро╛роХрпНроХрокрпНрокроЯрпНроЯро╡рпИ
            </p>
        </div>
    </div>

    <!-- Add/Edit Announcement Modal -->
    <div class="modal" id="announcementModal">
        <div class="modal-content">
            <div class="modal-header" id="modalHeader">рокрпБродро┐роп роЕро▒ро┐ро╡ро┐рокрпНрокрпБ роЪрпЗро░рпНроХрпНроХ</div>
            
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">родро▓рпИрокрпНрокрпБ *</label>
                <input type="text" id="announcementTitle" class="modal-input" placeholder="роО.роХро╛: роЗройрпНро▒рпБ рооро┐ройрпНродроЯрпИ" autofocus>
            </div>
            
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">ро╡роХрпИ</label>
                <select id="announcementCategory" class="modal-select">
                    <option value="родрогрпНрогрпАро░рпН">родрогрпНрогрпАро░рпН</option>
                    <option value="рооро┐ройрпНродроЯрпИ">рооро┐ройрпНродроЯрпИ</option>
                    <option value="рокрпКродрпБ">рокрпКродрпБ</option>
                    <option value="роиро┐роХро┤рпНро╡рпБ">роиро┐роХро┤рпНро╡рпБ</option>
                    <option value="рокро┐ро▒">рокро┐ро▒</option>
                </select>
            </div>
            
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">ро╡ро┐ро│роХрпНроХроорпН *</label>
                <textarea id="announcementDescription" class="modal-textarea" placeholder="ро╡ро┐рокро░роЩрпНроХро│рпИ роЗроЩрпНроХрпЗ роЙро│рпНро│ро┐роЯро╡рпБроорпН..."></textarea>
            </div>
            
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">родрпЗродро┐</label>
                <input type="date" id="announcementDate" class="modal-input">
            </div>
            
            <div class="modal-buttons">
                <button type="button" class="btn-add" onclick="saveAnnouncement()">роЪрпЗрооро┐</button>
                <button type="button" class="btn-cancel" onclick="closeAnnouncementModal()">ро░родрпНродрпБ</button>
            </div>
        </div>
    </div>

    <script>
        // Sample announcements
        const sampleAnnouncements = [
            {
                id: 1,
                title: "роЗройрпНро▒рпБ рооро┐ройрпН родроЯрпИ",
                category: "рооро┐ройрпНродроЯрпИ",
                description: "роХро╛ро▓рпИ 9 роорогро┐ роорпБродро▓рпН роородро┐ропроорпН 2 роорогро┐ ро╡ро░рпИ рооро┐ройрпНродроЯрпИ роЗро░рпБроХрпНроХрпБроорпН. рокро░ро╛рооро░ро┐рокрпНрокрпБ рокрогро┐роХро│рпН роироЯрпИрокрпЖро▒рпБроХро┐ройрпНро▒рой.",
                date: "2025-02-20"
            },
            {
                id: 2,
                title: "роХрпБроЯро┐роирпАро░рпН ро╡ро┐роиро┐ропрпЛроХ роирпЗро░роорпН",
                category: "родрогрпНрогрпАро░рпН",
                description: "роиро╛ро│рпИ (21.02.2025) роХро╛ро▓рпИ 6.30 роорпБродро▓рпН 8.30 ро╡ро░рпИ роХрпБроЯро┐роирпАро░рпН ро╡ро░рпБроорпН. роЕройрпИро╡ро░рпБроорпН родрпЗроХрпНроХро┐ ро╡рпИродрпНродрпБроХрпН роХрпКро│рпНро│ро╡рпБроорпН.",
                date: "2025-02-20"
            },
            {
                id: 3,
                title: "роЗро▓ро╡роЪ рооро░рпБродрпНродрпБро╡ роорпБроХро╛роорпН",
                category: "роиро┐роХро┤рпНро╡рпБ",
                description: "роЗроЮрпНроЮро╛ро┤ро┐ роироХро░рпН роЪроорпБродро╛ропроХрпН роХрпВроЯродрпНродро┐ро▓рпН роЮро╛ропро┐ро▒рпНро▒рпБроХрпНроХро┐ро┤роорпИ роХро╛ро▓рпИ 9 роорогро┐ роорпБродро▓рпН роородро┐ропроорпН 1 роорогро┐ ро╡ро░рпИ роЗро▓ро╡роЪ рооро░рпБродрпНродрпБро╡ роорпБроХро╛роорпН роироЯрпИрокрпЖро▒рпБроорпН.",
                date: "2025-02-22"
            }
        ];

        let announcements = [];
        let currentEditId = null; // for editing
        let activeFilter = 'all';

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadAnnouncements();
            renderAnnouncements();
            updateWhatsAppPreview();
            
            document.getElementById('announcementSearch').addEventListener('input', function() {
                renderAnnouncements();
            });
            
            document.getElementById('recipientName').addEventListener('input', updateWhatsAppPreview);
            document.getElementById('recipientPhone').addEventListener('input', updateWhatsAppPreview);
        });

        // Load from localStorage or use samples
        function loadAnnouncements() {
            const saved = localStorage.getItem('arthurAnnouncements');
            if (saved) {
                try {
                    announcements = JSON.parse(saved);
                } catch (e) {
                    announcements = [...sampleAnnouncements];
                }
            } else {
                announcements = [...sampleAnnouncements];
            }
            // Ensure each has an id
            announcements = announcements.map((a, index) => ({ ...a, id: a.id || index + 1 }));
        }

        // Save to localStorage
        function saveAnnouncementsToStorage() {
            localStorage.setItem('arthurAnnouncements', JSON.stringify(announcements));
        }

        // Render announcements grid
        function renderAnnouncements() {
            const grid = document.getElementById('announcementsGrid');
            if (!grid) return;

            // Filter by category
            let filtered = announcements;
            if (activeFilter !== 'all') {
                filtered = filtered.filter(a => a.category === activeFilter);
            }

            // Search filter
            const searchTerm = document.getElementById('announcementSearch').value.toLowerCase();
            if (searchTerm) {
                filtered = filtered.filter(a => 
                    a.title.toLowerCase().includes(searchTerm) || 
                    a.description.toLowerCase().includes(searchTerm)
                );
            }

            // Sort by date descending (newest first)
            filtered.sort((a, b) => (b.date || '').localeCompare(a.date || ''));

            grid.innerHTML = '';
            filtered.forEach(ann => {
                const card = document.createElement('div');
                card.className = 'announcement-card';
                card.innerHTML = `
                    <span class="announcement-category">${ann.category}</span>
                    <div class="announcement-title">${ann.title}</div>
                    <div class="announcement-description">${ann.description.replace(/\n/g, '<br>')}</div>
                    <div class="announcement-date"><i class="far fa-calendar-alt"></i> ${ann.date || 'родрпЗродро┐ роЗро▓рпНро▓рпИ'}</div>
                    <div class="card-actions">
                        <button class="card-btn" onclick="editAnnouncement(${ann.id})"><i class="fas fa-edit"></i> родро┐ро░рпБродрпНродрпБ</button>
                        <button class="card-btn delete" onclick="deleteAnnouncement(${ann.id})"><i class="fas fa-trash"></i> роирпАроХрпНроХрпБ</button>
                        <button class="card-btn whatsapp" onclick="shareAnnouncement(${ann.id})"><i class="fab fa-whatsapp"></i> рокроХро┐ро░рпН</button>
                    </div>
                `;
                grid.appendChild(card);
            });

            document.getElementById('totalAnnouncementsCount').textContent = announcements.length;
        }

        // Filter announcements
        function filterAnnouncements(category) {
            activeFilter = category;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent.includes(category) || (category === 'all' && btn.textContent.includes('роЕройрпИродрпНродрпБроорпН'))) {
                    btn.classList.add('active');
                }
            });
            renderAnnouncements();
        }

        // Open modal for add
        function openAddAnnouncementModal() {
            currentEditId = null;
            document.getElementById('modalHeader').textContent = 'рокрпБродро┐роп роЕро▒ро┐ро╡ро┐рокрпНрокрпБ роЪрпЗро░рпНроХрпНроХ';
            document.getElementById('announcementTitle').value = '';
            document.getElementById('announcementCategory').value = 'родрогрпНрогрпАро░рпН';
            document.getElementById('announcementDescription').value = '';
            // Set today's date as default
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('announcementDate').value = today;
            document.getElementById('announcementModal').classList.add('active');
        }

        // Open modal for edit
        function editAnnouncement(id) {
            const ann = announcements.find(a => a.id === id);
            if (!ann) return;
            currentEditId = id;
            document.getElementById('modalHeader').textContent = 'роЕро▒ро┐ро╡ро┐рокрпНрокрпИ родро┐ро░рпБродрпНродрпБ';
            document.getElementById('announcementTitle').value = ann.title;
            document.getElementById('announcementCategory').value = ann.category;
            document.getElementById('announcementDescription').value = ann.description;
            document.getElementById('announcementDate').value = ann.date || '';
            document.getElementById('announcementModal').classList.add('active');
        }

        // Close modal
        function closeAnnouncementModal() {
            document.getElementById('announcementModal').classList.remove('active');
        }

        // Save announcement (add or update)
        function saveAnnouncement() {
            const title = document.getElementById('announcementTitle').value.trim();
            const category = document.getElementById('announcementCategory').value;
            const description = document.getElementById('announcementDescription').value.trim();
            const date = document.getElementById('announcementDate').value;

            if (!title || !description) {
                alert('родро▓рпИрокрпНрокрпБ рооро▒рпНро▒рпБроорпН ро╡ро┐ро│роХрпНроХроорпН роХроЯрпНроЯро╛ропроорпН');
                return;
            }

            if (currentEditId) {
                // Update existing
                const index = announcements.findIndex(a => a.id === currentEditId);
                if (index !== -1) {
                    announcements[index] = {
                        ...announcements[index],
                        title,
                        category,
                        description,
                        date
                    };
                }
            } else {
                // Add new
                const newId = announcements.length > 0 ? Math.max(...announcements.map(a => a.id)) + 1 : 1;
                announcements.push({
                    id: newId,
                    title,
                    category,
                    description,
                    date
                });
            }

            saveAnnouncementsToStorage();
            renderAnnouncements();
            updateWhatsAppPreview();
            closeAnnouncementModal();
            alert('роЕро▒ро┐ро╡ро┐рокрпНрокрпБ роЪрпЗрооро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ!');
        }

        // Delete announcement
        function deleteAnnouncement(id) {
            if (confirm('роЗроирпНрод роЕро▒ро┐ро╡ро┐рокрпНрокрпИ роирпАроХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│ро╛?')) {
                announcements = announcements.filter(a => a.id !== id);
                saveAnnouncementsToStorage();
                renderAnnouncements();
                updateWhatsAppPreview();
                alert('роЕро▒ро┐ро╡ро┐рокрпНрокрпБ роирпАроХрпНроХрокрпНрокроЯрпНроЯродрпБ!');
            }
        }

        // Share single announcement via WhatsApp (without number, just text)
        function shareAnnouncement(id) {
            const ann = announcements.find(a => a.id === id);
            if (!ann) return;
            const message = `*${ann.title}*\nро╡роХрпИ: ${ann.category}\nродрпЗродро┐: ${ann.date || ''}\n\n${ann.description}\n\n- 40 ро╡ро╛ро░рпНроЯрпБ рооро╛рооройрпНро▒ роЙро▒рпБрокрпНрокро┐ройро░рпН, родрпВродрпНродрпБроХрпНроХрпБроЯро┐-628001`;
            const encoded = encodeURIComponent(message);
            window.open(`https://wa.me/?text=${encoded}`, '_blank');
        }

        // WhatsApp preview for all announcements
        function updateWhatsAppPreview() {
            const recipientName = document.getElementById('recipientName').value || 'рокрпЖро▒рпБроиро░рпН';
            let message = `ро╡рогроХрпНроХроорпН ${recipientName}!\n\n40 ро╡ро╛ро░рпНроЯрпБ рооро╛рооройрпНро▒ роЙро▒рпБрокрпНрокро┐ройро░рпН роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХро│рпН:\n\n`;
            
            if (announcements.length === 0) {
                message += 'роЗройрпНро▒рпБ роОроирпНрод роЕро▒ро┐ро╡ро┐рокрпНрокрпБроорпН роЗро▓рпНро▓рпИ.';
            } else {
                // Show latest 5 announcements
                const recent = [...announcements].sort((a,b) => (b.date||'').localeCompare(a.date||'')).slice(0,5);
                recent.forEach((ann, idx) => {
                    message += `${idx+1}. *${ann.title}* (${ann.category})\n   ${ann.description}\n   ЁЯУЕ ${ann.date || ''}\n\n`;
                });
                if (announcements.length > 5) message += '...роорпЗро▓рпБроорпН рокро▓ роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХро│рпН роЙро│рпНро│рой.\n\n';
            }
            
            message += `родрпКроЯро░рпНрокрпБроХрпНроХрпБ: ЁЯУЮ 9659286662\nЁЯУН 40 ро╡ро╛ро░рпНроЯрпБ, родрпВродрпНродрпБроХрпНроХрпБроЯро┐-628001\n\nроиройрпНро▒ро┐!`;
            
            document.getElementById('messagePreview').textContent = message;
        }

        // Test WhatsApp
        function testWhatsAppMessage() {
            const preview = document.getElementById('messagePreview').textContent;
            alert('WhatsApp роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯроорпН:\n\n' + preview);
        }

        // Send WhatsApp message with all announcements to a specific number
        function sendWhatsAppMessage() {
            const name = document.getElementById('recipientName').value;
            const phone = document.getElementById('recipientPhone').value;

            if (!name || !phone) {
                alert('рокрпЖропро░рпН рооро▒рпНро▒рпБроорпН родрпКро▓рпИрокрпЗроЪро┐ роОрогрпНрогрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }

            const cleanPhone = phone.replace(/\D/g, '');
            if (!/^[6-9]\d{9}$/.test(cleanPhone)) {
                alert('роЪро░ро┐ропро╛рой 10 роЗро▓роХрпНроХ роЗроирпНродро┐роп роОрогрпНрогрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }

            let message = `ро╡рогроХрпНроХроорпН ${encodeURIComponent(name)}!%0A%0A`;
            message += `40 ро╡ро╛ро░рпНроЯрпБ рооро╛рооройрпНро▒ роЙро▒рпБрокрпНрокро┐ройро░рпН роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХро│рпН:%0A%0A`;
            
            if (announcements.length === 0) {
                message += 'роЗройрпНро▒рпБ роОроирпНрод роЕро▒ро┐ро╡ро┐рокрпНрокрпБроорпН роЗро▓рпНро▓рпИ.';
            } else {
                const recent = [...announcements].sort((a,b) => (b.date||'').localeCompare(a.date||'')).slice(0,10);
                recent.forEach((ann, idx) => {
                    message += `${idx+1}. *${encodeURIComponent(ann.title)}* (${ann.category})%0A`;
                    message += `   ${encodeURIComponent(ann.description)}%0A`;
                    message += `   ЁЯУЕ ${ann.date || ''}%0A%0A`;
                });
            }
            
            message += `родрпКроЯро░рпНрокрпБроХрпНроХрпБ: ЁЯУЮ 9659286662%0AЁЯУН 40 ро╡ро╛ро░рпНроЯрпБ, родрпВродрпНродрпБроХрпНроХрпБроЯро┐-628001%0A%0AроиройрпНро▒ро┐!`;

            const url = `https://wa.me/91${cleanPhone}?text=${message}`;
            window.open(url, '_blank');
            
            // Save recipient
            localStorage.setItem('lastRecipient', JSON.stringify({ name, phone }));
        }

        // Save (just a manual trigger)
        function saveAnnouncements() {
            saveAnnouncementsToStorage();
            alert('роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХро│рпН роЪрпЗрооро┐роХрпНроХрокрпНрокроЯрпНроЯрой!');
        }

        // Export data
        function exportData() {
            const data = {
                announcements,
                exportDate: new Date().toISOString()
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'arthur_announcements_backup.json';
            a.click();
            URL.revokeObjectURL(url);
            alert('родро░ро╡рпБ роПро▒рпНро▒рпБроородро┐ роЪрпЖропрпНропрокрпНрокроЯрпНроЯродрпБ!');
        }

        // Import data
        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const data = JSON.parse(e.target.result);
                    if (data.announcements && Array.isArray(data.announcements)) {
                        announcements = data.announcements;
                        saveAnnouncementsToStorage();
                        renderAnnouncements();
                        updateWhatsAppPreview();
                        alert('родро░ро╡рпБ роЗро▒роХрпНроХрпБроородро┐ роЪрпЖропрпНропрокрпНрокроЯрпНроЯродрпБ!');
                    } else {
                        alert('родро╡ро▒ро╛рой роХрпЛрокрпНрокрпБ ро╡роЯро┐ро╡роорпН.');
                    }
                } catch (error) {
                    alert('роЗро▒роХрпНроХрпБроородро┐ родрпЛро▓рпНро╡ро┐: роЪро░ро┐ропро╛рой JSON роХрпЛрокрпНрокрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН.');
                }
                document.getElementById('importFile').value = '';
            };
            reader.readAsText(file);
        }

        // Clear all
        function clearAll() {
            if (confirm('роЕройрпИродрпНродрпБ роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХро│рпИропрпБроорпН роирпАроХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│ро╛?')) {
                announcements = [];
                saveAnnouncementsToStorage();
                renderAnnouncements();
                updateWhatsAppPreview();
                alert('роЕройрпИродрпНродрпБроорпН роЕро┤ро┐роХрпНроХрокрпНрокроЯрпНроЯрой!');
            }
        }

        // Print page
        function printPage() {
            const printContent = `
                <html>
                <head>
                    <title>40 ро╡ро╛ро░рпНроЯрпБ роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХро│рпН</title>
                    <style>
                        body { font-family: Arial; padding: 20px; }
                        .header { text-align: center; border-bottom: 2px solid #000; margin-bottom: 20px; }
                        .ann { margin-bottom: 20px; padding: 10px; background: #f9f9f9; }
                        .title { font-size: 18px; font-weight: bold; }
                        .date { color: #666; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h2>40 ро╡ро╛ро░рпНроЯрпБ рооро╛рооройрпНро▒ роЙро▒рпБрокрпНрокро┐ройро░рпН - роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХро│рпН</h2>
                        <p>родрпВродрпНродрпБроХрпНроХрпБроЯро┐-628001</p>
                    </div>
                    ${announcements.map(a => `
                        <div class="ann">
                            <div class="title">${a.title} (${a.category})</div>
                            <div class="date">ЁЯУЕ ${a.date || ''}</div>
                            <p>${a.description.replace(/\n/g, '<br>')}</p>
                        </div>
                    `).join('')}
                    <p style="text-align: center; margin-top: 40px;">роиройрпНро▒ро┐! роорпАрогрпНроЯрпБроорпН ро╡ро░рпБроХ!</p>
                </body>
                </html>
            `;
            const w = window.open('', '_blank');
            w.document.write(printContent);
            w.document.close();
            w.focus();
            setTimeout(() => w.print(), 250);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                saveAnnouncements();
            }
            if (e.key === 'Escape') {
                closeAnnouncementModal();
            }
        });

        // Auto-save every 30 seconds
        setInterval(saveAnnouncementsToStorage, 30000);
    </script>
</body>
</html>